<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hey â€” how are you?</title>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --accent:#b71c4a; --accent2:#ff7aa2; --glass:rgba(255,255,255,0.90);
      --max-w:900px;
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;font-family:Inter,system-ui,Arial;color:#2b1620;background:linear-gradient(160deg,#fff6fb,#fff)}
    .hero{height:320px;background-image:url("https://images.unsplash.com/photo-1604790639475-5df8dba2d6c5?auto=format&fit=crop&w=1800&q=70");background-size:cover;background-position:center;border-bottom-left-radius:36% 18%;border-bottom-right-radius:36% 18%;box-shadow:inset 0 -60px 90px rgba(255,240,245,0.22)}
    .card{max-width:var(--max-w);margin:-70px auto 60px;background:var(--glass);border-radius:14px;padding:34px;box-shadow:0 18px 45px rgba(20,20,40,0.12);backdrop-filter:blur(6px);text-align:center;position:relative}
    .title{font-family:"Playfair Display",serif;color:var(--accent);font-size:36px;margin:0 0 6px}
    .greet{font-size:16px;color:#6b4759;margin:0 0 18px}
    .lead{font-size:17px;color:#3b2631;line-height:1.6;margin-bottom:20px}
    .actions{display:flex;gap:12px;flex-wrap:wrap;justify-content:center}
    .btn{padding:12px 18px;border-radius:10px;border:0;cursor:pointer;color:#fff;font-weight:600;background:linear-gradient(90deg,var(--accent),var(--accent2));box-shadow:0 8px 20px rgba(183,28,74,0.14)}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(183,28,74,0.08);box-shadow:none}
    .note{font-size:13px;color:#6b4a5a;margin-top:12px}
    #tokenContainer{position:fixed;inset:0;pointer-events:none;z-index:2;overflow:hidden}
    .token{position:absolute;pointer-events:none;user-select:none;opacity:1;transition:transform 3s linear,opacity 3s linear}
    .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(8,8,12,0.38);z-index:1200;padding:16px}
    .modal{width:100%;max-width:560px;background:#fff;border-radius:10px;padding:16px;box-shadow:0 16px 40px rgba(20,20,40,0.22);text-align:left}
    .modal h3{margin:0 0 8px;font-family:Playfair Display,serif;color:var(--accent)}
    .modal textarea{width:100%;min-height:120px;border-radius:8px;border:1px solid #e6d6db;padding:10px;font-size:15px;resize:vertical}
    .modal .row{display:flex;gap:8px;justify-content:flex-end;margin-top:10px}
    .toast{position:fixed;left:50%;transform:translateX(-50%);bottom:18px;background:#111;color:#fff;padding:8px 14px;border-radius:8px;opacity:0;transition:opacity .25s;z-index:1300}
    @media (max-width:640px){.card{margin:-50px 14px 36px;padding:20px}.title{font-size:26px}.hero{height:240px}}
    @media (prefers-reduced-motion: reduce){ .token{transition:none} }
  </style>
</head>
<body>

<header class="hero" aria-hidden="true"></header>

<div id="tokenContainer" aria-hidden="true"></div>

<main class="card" role="main" aria-labelledby="page-title">
  <h1 id="page-title" class="title">Hey there ðŸ‘‹</h1>
  <p class="greet">Just checking in â€” how are you today?</p>
  <p class="lead" id="lead-text">If you'd like, write a short message below â€” I'll get it and reply.</p>

  <div class="actions">
    <button class="btn" id="openModalBtn">ðŸ’¬ Leave a message</button>
    <button class="btn ghost" id="burstBtn">ðŸ’˜ Burst</button>
  </div>

  <p class="note">Messages will open a chat app (Messenger preferred). If prefill is blocked, your typed text is copied so you can paste it.</p>
</main>

<!-- Modal -->
<div class="modal-backdrop" id="modal" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
    <h3 id="modalTitle">Write your message</h3>
    <textarea id="msgArea" placeholder="Type somethingâ€¦"></textarea>
    <div style="margin-top:8px;color:#6b4a5a;font-size:13px">After Send we will try to open Messenger. If it doesn't prefill, your text is already copied â€” just paste.</div>
    <div class="row">
      <button class="btn ghost" id="cancelBtn">Cancel</button>
      <button class="btn" id="sendBtn">Send</button>
    </div>
  </div>
</div>

<div class="toast" id="toast" role="status" aria-live="polite">Copied to clipboard</div>

<script>
/* =========================
   CONFIG - edit these only
   ========================= */
const FB_NUMERIC_ID = "61587285399310";   // <--- your numeric FB ID (already set)
const WP_NUMBER = "";                     // <--- optional WhatsApp number (no +), e.g. 8801XXXXXXXXX
const HOST_EMAIL = "";                    // <--- optional fallback email
/* ========================= */

const TOKENS = ["ðŸ’–","ðŸŒ¸","âœ¨","ðŸŒº","ðŸ’•"];
const BASE_INTERVAL = 420; //ms. larger = lighter load

/* Token creation (light, small count to avoid performance issues) */
function createToken(xPercent, size, duration, emoji) {
  const container = document.getElementById('tokenContainer');
  const el = document.createElement('div');
  el.className = 'token';
  el.textContent = emoji;
  el.style.left = (xPercent * window.innerWidth) + 'px';
  el.style.fontSize = size + 'px';
  container.appendChild(el);

  // small random rotation and final position
  requestAnimationFrame(() => {
    const endY = window.innerHeight + 60 + Math.random() * 160;
    const rotate = Math.random() * 120 - 60;
    el.style.transform = `translateY(${endY}px) rotate(${rotate}deg)`;
    el.style.opacity = '0.06';
  });

  setTimeout(()=> el.remove(), duration + 300);
}

/* Continuous spawn (but respect prefers-reduced-motion) */
const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
let spawnInterval = null;
if (!prefersReduced) {
  spawnInterval = setInterval(()=> {
    const x = Math.random();
    const size = 12 + Math.random() * 36;
    const duration = 3000 + Math.random() * 2600;
    const emoji = TOKENS[Math.floor(Math.random() * TOKENS.length)];
    createToken(x, size, duration, emoji);
  }, BASE_INTERVAL);
}

/* Burst (limited) */
function burst(count=20) {
  for (let i=0;i<count;i++){
    setTimeout(()=>{
      const x = Math.random();
      const size = 14 + Math.random() * 38;
      const duration = 2500 + Math.random() * 3000;
      const emoji = TOKENS[Math.floor(Math.random() * TOKENS.length)];
      createToken(x, size, duration, emoji);
    }, i * 60);
  }
}

/* Modal controls */
const modal = document.getElementById('modal');
const openModalBtn = document.getElementById('openModalBtn');
const cancelBtn = document.getElementById('cancelBtn');
const sendBtn = document.getElementById('sendBtn');
const msgArea = document.getElementById('msgArea');
const toast = document.getElementById('toast');

openModalBtn.addEventListener('click', ()=> {
  modal.style.display = 'flex';
  modal.setAttribute('aria-hidden','false');
  msgArea.value = '';
  msgArea.focus();
});
cancelBtn.addEventListener('click', ()=> {
  modal.style.display = 'none';
  modal.setAttribute('aria-hidden','true');
});
document.getElementById('burstBtn').addEventListener('click', ()=> burst(28));

/* Helper: show toast */
function showToast(text, ms=1600) {
  toast.textContent = text;
  toast.style.opacity = '1';
  setTimeout(()=> toast.style.opacity = '0', ms);
}

/* Copy to clipboard (returns promise) */
function copyToClipboard(text) {
  if (!navigator.clipboard) {
    // fallback
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    try { document.execCommand('copy'); document.body.removeChild(ta); return Promise.resolve(true); }
    catch(e){ document.body.removeChild(ta); return Promise.reject(e); }
  }
  return navigator.clipboard.writeText(text);
}

/* Build fallback links */
function buildLinks(text) {
  const body = encodeURIComponent(text);
  const mMe = `https://www.facebook.com/messages/t/${FB_NUMERIC_ID}`;
  const wa = WP_NUMBER ? `https://wa.me/${WP_NUMBER}?text=${body}` : null;
  const mailto = HOST_EMAIL ? `mailto:${HOST_EMAIL}?subject=${encodeURIComponent('Message from site')}&body=${body}` : null;
  // App-scheme attempt for Messenger (best-effort)
  const fbApp = `fb-messenger://user-thread/${FB_NUMERIC_ID}`;
  return {fbApp, mMe, wa, mailto};
}

/* Send logic:
   1) Copy message to clipboard (so visitor can paste if prefill blocked)
   2) Try to open Messenger app scheme (assign location)
   3) After short timeout, open messenger web in a new tab
   4) If WhatsApp configured, open it soon after as alternative
   5) Finally open mailto if configured
*/
function sendMessageFlow(text) {
  const links = buildLinks(text);
  // copy text to clipboard so visitor can paste
  copyToClipboard(text).then(()=> showToast('Message copied â€” paste if needed'));
  // Try messenger app scheme (best-effort)
  // Use location.href to attempt to open app; many browsers block but it's a standard approach
  try { window.location = links.fbApp; } catch(e){}
  // After a short pause, open m.me in a new tab (safe)
  setTimeout(()=> {
    try { window.open(links.mMe, '_blank'); } catch(e){}
  }, 700);
  // If WhatsApp configured, open it as another fallback shortly after
  if (links.wa) {
    setTimeout(()=> {
      try { window.open(links.wa, '_blank'); } catch(e){}
    }, 1300);
  } else if (links.mailto) {
    // final fallback
    setTimeout(()=> {
      try { window.open(links.mailto, '_blank'); } catch(e){}
    }, 1300);
  }
}

/* Send button action */
sendBtn.addEventListener('click', ()=> {
  const text = msgArea.value.trim();
  if (!text) { alert('Please type a short message'); msgArea.focus(); return; }
  // nice burst feedback
  burst(16);
  // close modal
  modal.style.display = 'none';
  modal.setAttribute('aria-hidden','true');
  // run sending flow
  sendMessageFlow(text);
});

/* Close modal on backdrop click */
modal.addEventListener('click', (e)=> { if (e.target === modal) { modal.style.display = 'none'; modal.setAttribute('aria-hidden','true'); } });

</script>
</body>
</html>


